(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1244],{9823:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/graphing",function(){return n(7311)}])},7311:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var l=n(4848),r=n(6540),i=n(8297);function o(){let[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[s,c]=(0,r.useState)("#000000"),[a,u]=(0,r.useState)({xCenter:0,yCenter:0,scale:50}),f=(0,r.useRef)(null),x=(0,r.useRef)(!1),h=(0,r.useRef)({x:0,y:0});function d(e,t,n,l){let{xCenter:r,yCenter:i,scale:o}=a;return{cx:n/2+(e-r)*o,cy:l/2-(t-i)*o}}return(0,r.useEffect)(()=>{!function(){let t=f.current;if(!t)return;let n=t.getContext("2d"),l=t.width,r=t.height;n.clearRect(0,0,l,r),n.fillStyle="#ffffff",n.fillRect(0,0,l,r);let{scale:o,xCenter:s,yCenter:c}=a,u=s-l/(2*o),x=s+l/(2*o),h=c-r/(2*o),g=c+r/(2*o);for(let t of(function(e,t,n,l,r,i,o){let{scale:s}=a,c=1;for(let e of[1,2,5,10,20,50,100,200,500,1e3])if(s*e>=50&&s*e<=200){c=e;break}e.strokeStyle="#ccc",e.lineWidth=1,e.font="10px sans-serif",e.fillStyle="#666";let u=Math.ceil(l/c)*c;for(let l=u;l<=r;l+=c){let{cx:r}=d(l,0,t,n);e.beginPath(),e.moveTo(r,0),e.lineTo(r,n),e.stroke(),e.save(),e.translate(r,n/2),e.rotate(0),e.fillText(l.toString(),2,n/2-2),e.restore()}let f=Math.ceil(i/c)*c;for(let l=f;l<=o;l+=c){let{cy:r}=d(0,l,t,n);e.beginPath(),e.moveTo(0,r),e.lineTo(t,r),e.stroke(),e.save(),e.translate(t/2,r),e.fillText(l.toString(),4,-2),e.restore()}}(n,l,r,u,x,h,g),e))(function(e,t,n,l,r,o,s){e.strokeStyle=s,e.lineWidth=2,e.beginPath();let c=!0;for(let s=0;s<=t;s++){let a;let u=l+s/t*(r-l);try{if(a=(0,i._3)(o,{x:u}),"number"!=typeof a||isNaN(a))continue}catch(e){continue}let{cx:f,cy:x}=d(u,a,t,n);c?(e.moveTo(f,x),c=!1):e.lineTo(f,x)}e.stroke()})(n,l,r,u,x,t.expression,t.color);(function(e,t,n){let{cx:l}=d(0,0,t,n),{cy:r}=d(0,0,t,n);e.strokeStyle="#000",e.lineWidth=1.5,e.beginPath(),e.moveTo(l,0),e.lineTo(l,n),e.stroke(),e.beginPath(),e.moveTo(0,r),e.lineTo(t,r),e.stroke()})(n,l,r)}()},[a,e]),(0,l.jsxs)("div",{style:{display:"flex",margin:"20px"},children:[(0,l.jsxs)("div",{style:{width:"200px",marginRight:"10px"},children:[(0,l.jsx)("h3",{children:"Functions"}),(0,l.jsxs)("div",{style:{marginBottom:"1em"},children:[(0,l.jsx)("input",{type:"text",placeholder:"e.g. cos(x)",value:n,onChange:e=>o(e.target.value),style:{width:"100%",marginBottom:"0.5em"}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{style:{marginRight:"5px"},children:"Color:"}),(0,l.jsx)("input",{type:"color",value:s,onChange:e=>c(e.target.value)})]}),(0,l.jsx)("button",{onClick:function(){n.trim()&&(t([...e,{expression:n,color:s}]),o(""))},style:{marginTop:"0.5em"},children:"Add Function"})]}),(0,l.jsx)("ul",{style:{listStyle:"none",paddingLeft:0},children:e.map((n,r)=>(0,l.jsxs)("li",{style:{marginBottom:"0.5em"},children:[(0,l.jsx)("span",{style:{display:"inline-block",width:"1em",height:"1em",backgroundColor:n.color,marginRight:"5px",verticalAlign:"middle"}}),n.expression,(0,l.jsx)("button",{onClick:()=>(function(n){let l=[...e];l.splice(n,1),t(l)})(r),style:{marginLeft:"10px",fontSize:"0.8em"},children:"Remove"})]},r))})]}),(0,l.jsxs)("div",{style:{flexGrow:1,textAlign:"center"},children:[(0,l.jsx)("canvas",{ref:f,width:900,height:600,style:{border:"1px solid #888",cursor:"grab"},onMouseDown:e=>{x.current=!0,h.current={x:e.clientX,y:e.clientY}},onMouseMove:e=>{if(!x.current)return;let t=e.clientX-h.current.x,n=e.clientY-h.current.y;u(e=>({...e,xCenter:e.xCenter-t/e.scale,yCenter:e.yCenter+n/e.scale})),h.current={x:e.clientX,y:e.clientY}},onMouseUp:()=>{x.current=!1},onMouseLeave:()=>{x.current=!1},onWheel:e=>{e.preventDefault();let{width:t,height:n}=f.current,l=e.clientX-f.current.getBoundingClientRect().left,r=e.clientY-f.current.getBoundingClientRect().top,{x:i,y:o}=function(e,t,n,l){let{xCenter:r,yCenter:i,scale:o}=a;return{x:r+(e-n/2)/o,y:i-(t-l/2)/o}}(l,r,t,n),s=e.deltaY<0?1.1:.9;u(e=>{let c=e.scale*s,a={...e,scale:c},{x:u,y:f}={x:i,y:o};return a.xCenter=u-(l-t/2)/c,a.yCenter=f+(r-n/2)/c,a})}}),(0,l.jsx)("p",{style:{fontSize:"0.9em",color:"#555"},children:"Drag to pan, scroll to zoom."})]})]})}},1234:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[8297,636,6593,8792],()=>t(9823)),_N_E=e.O()}]);